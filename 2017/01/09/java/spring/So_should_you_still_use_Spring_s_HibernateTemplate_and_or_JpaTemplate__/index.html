<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="java,ruby,python,scala,sql,db,并发,协程"><title>So should you still use Spring's HibernateTemplate and/or JpaTemplate?? | 技术随手记</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.2.0"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=1.2.0"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">So should you still use Spring's HibernateTemplate and/or JpaTemplate??</h1><a id="logo" href="/.">技术随手记</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">So should you still use Spring's HibernateTemplate and/or JpaTemplate??</h1><div class="post-meta">Jan 9, 2017<span> | </span><span class="category"><a href="/categories/java/">java</a><a href="/categories/java/spring/">spring</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2017/01/09/java/spring/So_should_you_still_use_Spring_s_HibernateTemplate_and_or_JpaTemplate__/" href="/2017/01/09/java/spring/So_should_you_still_use_Spring_s_HibernateTemplate_and_or_JpaTemplate__/#comments" class="ds-thread-count"></a><div class="post-content"><p>I was reading <a href="http://www.infoq.com/articles/dynamic-routing-using-spring" target="_blank" rel="external">an article by Vigil Bose</a> on TSS the other day and saw the usage of the <code>HibernateDaoSupport</code> class. Since this is no longer a recommended way of using Hibernate from Spring, I thought I might as well just blog about it another time.   </p>
<p>不建议使用<code>HibernateDaoSupport</code>。   </p>
<p>With the advent(n. 到来；出现；) of Spring 2.0, it has become possible to start using the Hibernate Session API directly again. The question is whether or not it is wise to abandon the use of the <code>HibernateTemplate</code> when working with Hibernate, or any other template-based approaches Spring features.  </p>
<h2 id="Using-Spring-XxxTemplates"><a href="#Using-Spring-XxxTemplates" class="headerlink" title="Using Spring XxxTemplates"></a>Using Spring XxxTemplates</h2><p>In Spring 1.0, we introduced a revolutionary way of working with data access APIs that threw checked exceptions. The template approach Spring features along with its transaction synchronization manager and the extensive(adj. 广泛的；大量的；广阔的) use of runtime exceptions makes any TCFTC (short for try/catch-finally-try/catch as we coined(杜撰) it back in 2005) often found in data access code entirely obsolete. Below you can see (a simplified version and not entirely precise version of) what Spring’s template approach does for you (with specific code snippets that you would otherwise have to write).</p>
<p><strong>Acquisition of connection</strong>: If transaction synchronization is active (which it is, if you’re using Spring’s transaction management infrastructure), most of the times any of the Spring templates are using the same connection across the entire thread (things are actually a bit more complicated than that, but that would lead us too much into the gory details).   </p>
<p><strong>Participation in a transaction</strong> Again, when using transaction management features, Spring will automatically associated any new connection with the current transaction. This again, all depends on the current propagations settings and so on, but whichever way you look at it, your core code is not affected by it.</p>
<p><strong>Specification of the SQL</strong>: This is what you (obviously) have to do yourself. The SQL ideally uses bind parameters, to avoid any chances of SQL injection from happening. Parameters are passed to the JDBC template as arguments.</p>
<p><strong>Creation / execution of statement and iterating over result set</strong>: After you’ve specified the SQL, Spring is going to create the statement for you, set any parameters you may have specified, execute it and loop over the result set for you.</p>
<p><strong>Parse result from result set</strong>: You can opt for parsing the result set yourself if you like (or if you have complex parsing requirements), or you can have Spring result a list of primitives, or just one value from the result set.</p>
<p><strong>Handling and translation of exceptions</strong>: This is where Spring translates any exceptions that might have occurred to Spring’s own DataAccessException hierarchy, automatically insulating calling code from the data access technology in use.</p>
<p><strong>Releasing of connection</strong>: This is the last piece of the puzzle where Spring releases any resources used. Of course, if transaction synchronization is active, the resources might not be released immediately.</p>
<p>Templates are available for several APIs such as:</p>
<ul>
<li>JDBC (JdbcTemplate)</li>
<li>Hibernate (HibernateTemplate)</li>
<li>iBatis (SqlMapClientTemplate)</li>
<li>JDO (JdoTemplate)</li>
<li>TopLink (TopLinkTemplate)</li>
<li>Messaging (JmsTempate)</li>
<li>Transaction management (TransactionTemplate)</li>
<li>JNDI (JndiTemplate)</li>
</ul>
<h2 id="Are-templates-really-necessary"><a href="#Are-templates-really-necessary" class="headerlink" title="Are templates really necessary?"></a>Are templates really necessary?</h2><p>The templates add a lot of value when using an API that uses checked exceptions (as opposed to runtime exceptions or unchecked exceptions), but also add a lot of consistency to your code base. People having learnt Spring’s <code>JdbcTemplate</code> can pretty easily start using Spring’s <code>JdoTemplate</code> or Spring’s <code>HibernateTemplate</code>–the approach to using those is similar for each one of them.</p>
<p>The most visible impact of the Spring template approach is the code reduction for for example JDBC. This is primarily because the checked exceptions are translated to runtime exceptions inside the template, removing the need to catch the exception in your mainline code. Other reasons are the transparent resource management and automatic synchronization with the currently running transaction. Of course it’s fairly easy to change a framework to use runtime exceptions natively instead of Spring having to do this and this is what for example Hibernate has started to do from version 3.0 onwards. Hibernate is not the only technology to do this–the Java Persistence API is also using runtime exceptions.</p>
</div><div class="tags"><a href="/tags/spring/">spring</a><a href="/tags/java/">java</a><a href="/tags/hibernate/">hibernate</a><a href="/tags/HibernateTemplate/">HibernateTemplate</a></div><div class="post-nav"><a href="/2017/01/09/java/spring/是该抛弃Spring_HibernateTemplate的时候了/" class="pre">是该抛弃Spring HibernateTemplate的时候了</a><a href="/2017/01/08/java/jta/java分布式事务_JTA_实现 jotm和atomikos/" class="next">java分布式事务(JTA)实现 jotm和atomikos</a></div><div data-thread-key="2017/01/09/java/spring/So_should_you_still_use_Spring_s_HibernateTemplate_and_or_JpaTemplate__/" data-title="So should you still use Spring's HibernateTemplate and/or JpaTemplate??" data-url="http://jishusuishouji.github.io/2017/01/09/java/spring/So_should_you_still_use_Spring_s_HibernateTemplate_and_or_JpaTemplate__/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到:</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2017/01/09/java/spring/So_should_you_still_use_Spring_s_HibernateTemplate_and_or_JpaTemplate__/" data-title="So should you still use Spring's HibernateTemplate and/or JpaTemplate??" data-url="http://jishusuishouji.github.io/2017/01/09/java/spring/So_should_you_still_use_Spring_s_HibernateTemplate_and_or_JpaTemplate__/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="widget"><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="请输入关键字..."/></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Druid/">Druid</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Velocity/">Velocity</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/druid/">druid</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/jta/">jta</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/">spring</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/">spring</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/函数式编程/">函数式编程</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/架构/">架构</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/Druid/" style="font-size: 15px;">Druid</a> <a href="/tags/函数式编程/" style="font-size: 15px;">函数式编程</a> <a href="/tags/架构/" style="font-size: 15px;">架构</a> <a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/druid/" style="font-size: 15px;">druid</a> <a href="/tags/jta/" style="font-size: 15px;">jta</a> <a href="/tags/分布式事务/" style="font-size: 15px;">分布式事务</a> <a href="/tags/jotm/" style="font-size: 15px;">jotm</a> <a href="/tags/atomikos/" style="font-size: 15px;">atomikos</a> <a href="/tags/hibernate/" style="font-size: 15px;">hibernate</a> <a href="/tags/HibernateTemplate/" style="font-size: 15px;">HibernateTemplate</a> <a href="/tags/Velocity/" style="font-size: 15px;">Velocity</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-fei"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/03/25/hanshushi/Pointfree_编程风格指南/">Pointfree 编程风格指南</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/23/nginx/用Nginx搭建CDN服务器方法-开启Nginx缓存与镜像,自建图片服务器/">用Nginx搭建CDN服务器方法-开启Nginx缓存与镜像,自建图片服务器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/23/druid/druid_配置WebStatFilter_网络url统计/">druid 配置WebStatFilter 网络url统计</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/23/druid/DRUID连接池的实用_配置详解/">DRUID连接池的实用 配置详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/23/druid/Druid：一个用于大数据实时处理的开源分布式系统/">Druid：一个用于大数据实时处理的开源分布式系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/21/jiagou/架构师必看_京东咚咚架构演进/">架构师必看 京东咚咚架构演进</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/25/xunihua/VAGRANT_和_Docker的使用场景和区别_/">VAGRANT 和 Docker的使用场景和区别?</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/22/java/velocity/使用_Velocity_模板引擎快速生成代码/">使用 Velocity 模板引擎快速生成代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/17/spring/Spring中提示元素__ref__中不允许出现属性__local_/">Spring中提示元素 'ref' 中不允许出现属性 'local'</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/14/nodejs/nodejs的require模块及路径/">nodejs的require模块及路径</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-commt"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div></div></div></div><a id="totop" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.2.0" async></script><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |<a href="/atom.xml">订阅本站</a> |<span>联系博主：<a href="mailto:null" target="_blank" class="fa fa-email"> </a><a href="null" target="_blank" class="fa fa-weibo"></a><a href="null" target="_blank" class="fa fa-github"> </a></span></p><p><span> Copyright &copy;<a href="/." rel="nofollow">技术随手记</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span><span><a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> Theme </a>by<a rel="nofollow" target="_blank" href="https://github.com/chaooo"> Charles.</a></span></p></div></div></div><script>var duoshuoQuery = {short_name:'jishusuishouji'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    document.getElementsByTagName('body')[0].appendChild(ds);
})();
</script><script type="text/javascript" src="/js/search.json.js?v=1.2.0"></script></body></html>